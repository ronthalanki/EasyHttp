plugins {
    id 'checkstyle'
    id 'java'
    id 'com.diffplug.gradle.spotless' version '3.22.0'
}

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.apache.httpcomponents:httpclient:4.5.9'
    compile 'org.apache.commons:commons-lang3:3.0'

    testCompile 'org.assertj:assertj-core:3.13.1'
    testCompile 'junit:junit:4.12'
}

spotless {
    java {
        googleJavaFormat()
        removeUnusedImports()
    }
}

task testUnit(type: Test) {
    useJUnit {
        includeCategories 'marquez.UnitTests'
    }
}

def reportsDir = "${buildDir}/reports";

checkstyle {
    toolVersion = '8.12'
    configFile = rootProject.file('checkstyle.xml')
}

task checkstyle(type: Checkstyle) {
    reports {
        xml.enabled = true
        html.enabled = true
        html.destination = file("${reportsDir}/checkstyle")
    }
}

checkstyleMain {
    source = 'src/main/java'
}

checkstyleTest {
    source = 'src/test/java'
}
